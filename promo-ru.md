Я сделал шаблон полного стека с помощью Next.js, Prisma и Docker, который вы можете повторно использовать для своих собственных проектов

Всем привет.

Я сделал шаблон с помощью Next.js и Prisma Postgres, который вы можете использовать в качестве основы для своих собственных проектов.

Не позволяйте простому пользовательскому интерфейсу ввести вас в заблуждение, это довольно большой проект с полной настройкой для среды разработки, тестирования и производства с конвейерами Github Actions CI/CD. Что-то подобное вы найдете в небольшом или среднем стартапе. Все среды настроены для запуска локально или в Docker.

Вы можете запускать разработку локально, с VS Code devcontainers или с помощью игровой площадки Gitpod, если хотите протестировать что-то очень быстро. Я предлагаю вам попробовать devcontainers, потому что они позволяют очень быстро подключать новых членов команды, им просто нужно запустить контейнер приложения. Кроме того, все члены команды имеют согласованную среду, поэтому гораздо проще воспроизводить ошибки и устранять проблемы.

Он имеет модульные и интеграционные тесты для внешнего интерфейса с библиотекой тестирования Jest и React для компонентов, хуков и хуков React Query. Также у него есть модульные и интеграционные тесты для бэкенда с Jest, Supertest и тестовая база данных для контроллеров и сервисов. Все тесты настроены для локального запуска, внутри Docker и в Github Actions.

Покрытие кода также настроено, и оно составляет около 40%, но важно отметить, что у вас есть конфигурация и пример теста для каждого типа теста, поэтому вы можете повторно использовать их и использовать в качестве справочного материала при создании и тестировании собственных функций.

Он также имеет сквозные тесты с Cypress, также полностью настроенным для локального запуска, в Docker и в Github Actions.

Для производства у вас есть локальная среда и среда Docker, которые вы можете использовать в качестве промежуточной. Но также я сделал отдельный репозиторий с реальной рабочей средой с Traefik и Docker, который вы можете использовать для размещения нескольких приложений (включая это приложение, конечно) на любом Linux VPS. Вам просто нужен образ Docker на Dockerhub. Для этого я настроил рабочие процессы в Github Actions, чтобы создать приложение в виде образа Docker, отправить его в Dockerhub и развернуть его с помощью SSH на вашем VPS, и все это одним нажатием git.

Само приложение представляет собой приложение Next.js, написанное на Typescript, с настраиваемым сервером http/https, оно использует next-auth для входа в систему с помощью электронной почты/пароля, Google и Facebook OAuth. Он использует Prisma ORM с моделями User и Post и базой данных Postgres, которая работает в Docker. Я не хотел добавлять больше моделей, потому что это повредило бы повторному использованию этого стартового проекта. Сид-скрипт с Faker включен. Стилизация выполняется с помощью Tailwind и SCSS, а для именования классов используется БЭМ. Поддержка тем реализована в виде плагина Tailwind. Для загрузки приложение использует последнюю версию React Query v4. Формы создаются с помощью схем React Hook Form и Zod, которые также повторно используются на бэкэнде. Он использует Suspense и ErrorBoundary для загрузки и состояний ошибок. Серверная часть использует собственные API-интерфейсы Next.js с маршрутизатором следующего подключения и Multer для загрузки. Также настроены другие вещи, такие как ESLint, Prettier, SEO.

Он использует все последние версии пакетов, таких как React 18.2, Next.js 12.2, React Query 4, React Hook Form 8, Prisma 4, Tailwind 3.1.

Также есть подробный файл Readme и вся папка с документацией, где вы можете найти все сложные части, задокументированные с проблемами, решениями и ссылками на полезные ссылки.

Вот несколько советов, как это можно использовать:

Во-первых, наиболее очевидным является использование его в качестве базы для собственных проектов. Зачем вам тратить несколько месяцев на борьбу с усталостью от принятия решений, написание шаблонного кода и настройку сред и конвейеров, если вы можете установить это за 15 минут и сразу же начать работать над своими функциями. Вам просто нужна идея приложения и оригинальная система дизайна для стилизации.

Во-вторых, если вы все еще изучаете React, вы можете использовать его для обучения и анализа того, как здесь все реализовано. Вы можете разорвать его на части и повторно использовать уже работающие и проверенные функции. Вы можете повторно использовать конфигурации. Например, вы можете повторно использовать конфигурацию devcontainers для любого проекта Node.js.

В-третьих, если вы уже хорошо разбираетесь в функциях React 18, вы можете взглянуть на одну открытую проблему и бросить себе вызов и посмотреть, сможете ли вы ее исправить. Также в Readme есть раздел «Дорожная карта», если вы хотите внести свой вклад.

Все конструктивные предложения по дальнейшему улучшению этого шаблона приветствуются, не стесняйтесь открывать новую проблему с отчетом об ошибке или запросом функции.

Если вы используете его, чтобы построить что-то поверх него, не стесняйтесь отправить мне сообщение и показать мне, что вы сделали, как это сработало для вас, и ваши предложения, что бы вы сделали по-другому и лучше.

Все это совершенно бесплатно, репозиторий Github находится по ссылке ниже. Также я развернул демо-версию в реальном времени, которую вы можете попробовать.

Демонстрационная ссылка:

Репозиторий на гитхабе:
